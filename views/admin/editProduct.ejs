<%- include('../layouts/adminHeader')  %>

<style>

    /* Style for form container */
.form-container {
  max-width: 600px;
  margin: 0 auto;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

/* Style for form fields */
.form-group {
  margin-bottom: 20px;
}

/* Style for labels */
label {
  font-weight: bold;
}

/* Style for text inputs and textareas */
input[type="text"],
input[type="number"],
textarea {
  width: 50%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

/* Style for file input */


img {
  margin-right: 10px;
  margin-bottom: 10px;
  max-width: 100px;
  max-height: 100px;
}

/* Style for submit button */
button[type="submit"] {
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 10px 20px;
  cursor: pointer;
}

/* Hover effect for submit button */
button[type="submit"]:hover {
  background-color: #0056b3;
}


</style>


<div class="main-panel">
    <div class="content-wrapper">
        <button class="back-bt" style="float: right;"><li class="breadcrumb-item"><a href="/admin/products">Back</a></button>
        <h3>Edit Product</h3>


        <form action="/admin/products/<%= product._id %>/edit" method="POST" enctype="multipart/form-data">
            <div class="form-group">
              <label for="name">Name:</label>
              <input type="text" id="name" name="name" value="<%= product.name %>" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="category">Category:</label>
                <select id="category" name="category" class="form-control" style="width: 50%;" required>
                    <option value="">Select Category</option>
                    <!-- Iterate over categories and generate options -->
                    <% category.forEach(category => { %>
                        <option value="<%= category._id %>" <% if (product.category && product.category.equals(category._id)) { %> selected <% } %>><%= category.name %></option>
                    <% }); %>
                </select>
            </div>

            <div class="form-group">
              <label for="price">Price:</label>
              <input type="number" id="price" name="price" value="<%= product.price %>" class="form-control" required>
            </div>

            <div class="form-group">
              <label for="quantity">Quantity:</label>
              <input type="number" id="quantity" name="quantity" value="<%= product.quantity %>" class="form-control" required>
            </div>

            <div class="form-group">
              <label for="image">Image:</label>
              <input type="file" id="image" name="image" multiple class="form-control-file">
              <% product.image.forEach(image => { %>
                <img src="/uploads/<%= image %>" alt="Product Image" style="width: 50px; height: 50px;">
              <% }); %>
            </div>

            <div class="form-group">
              <label for="description">Description:</label>
              <textarea id="description" name="description" rows="4" class="form-control" required><%= product.description %></textarea>
            </div>

            <div class="form-group">
              <label for="offerPrice">Offer Price:</label>
              <input type="number" id="offerPrice" name="offerPrice" value="<%= product.offerPrice %>" class="form-control" required>
            </div>

            <!-- <div class="form-group">
              <label for="offer">Offer:</label>
              <input type="number" id="offer" name="offer" value="<%= product.offer %>" class="form-control" required>
            </div> -->
            
           <!-- Form -->
           <form action="/admin/products/<%= product._id %>/edit" method="POST" enctype="multipart/form-data">
            <!-- Form fields go here -->  
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        

          <!-- Bootstrap Modal for Success Message -->
          <div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="successModalLabel">Edit Successful</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                      </div>
                      <div class="modal-body">
                          Your product has been successfully edited.
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                      </div>
                  </div>
              </div>
          </div>


          </form>
          
          

          <script>
            // Listen for form submission
            document.getElementById('editProductForm').addEventListener('submit', function(event) {
                // Show the success modal after the form is successfully submitted
                $('#successModal').modal('show');
            });
        </script>
        
    






    </div>
</div>


<%- include('../layouts/adminFooter')  %>
